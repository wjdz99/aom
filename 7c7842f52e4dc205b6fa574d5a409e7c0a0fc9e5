{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9bb35b49_c5973937",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2021-08-30T10:50:19Z",
      "side": 1,
      "message": "Hi Yunqing,\nIn this CL, we have extended the speed feature ‘skip_filter_intra_in_inter_frames’ to --rt, speed \u003d 4 as per our discussion in the gerrit link below.\nhttps://aomedia-review.googlesource.com/c/aom/+/144802\nTo enable the sf \u0027skip_filter_intra_in_inter_frames\u0027, we used speed \u003e\u003d 4 check. We hope it is fine.\n\nPlease find the detailed Borg results below:\n \n  CPU Resolution   Instruction Count          BD-Rate Loss %\n                      Reduction %   \tavg.psnr ovr.psnr    ssim                                    \n  4    Average           0.815     \t0.0246    0.0294    0.0375 \n  4    rtc_derf         -0.000     \t0.0000    0.0000    0.0000 \n  4      rtc             1.591     \t0.0421    0.0504    0.0642 \n\nPlease review the patch and let us know your opinion. \n   \nIn the commit message, BD rate impact column: \n[+] sign is for BD-Rate drop \n[-] sign is for BD-Rate improvement. \nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc … \n\nRegards,\nRanjit",
      "revId": "7c7842f52e4dc205b6fa574d5a409e7c0a0fc9e5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b3a3f16_8f4e4a02",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 2
      },
      "lineNbr": 1212,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-08-30T18:44:09Z",
      "side": 1,
      "message": "Would suggest to remove this part since speed 0 to 4 is the same thing, you can enable this as a default feature. Hopefully we don\u0027t need to maintain \u0026 test more speeds by keeping less speeds around.",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1212,
        "endChar": 19
      },
      "revId": "7c7842f52e4dc205b6fa574d5a409e7c0a0fc9e5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3399aeb1_da93f843",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 2
      },
      "lineNbr": 1212,
      "author": {
        "id": 6245
      },
      "writtenOn": "2021-08-31T15:55:34Z",
      "side": 1,
      "message": "Hi Yunqing,\nWe did few quick tests on --rt usage for speed\u003d0 to 4. Based on the limited tests done (for 30 frames), we observed that outputs from speed\u003d1 to 4 bit-match, but mismatch with that of speed\u003d0. This could be due to preset dependency while calculating sb_size in av1_select_sb_size(). \n\nPlease find the detailed BORG results below, when we tried enabling the sf \u0027skip_filter_intra_in_inter_frames\u0027 for speed\u003d0 as well:\n\n\tCPU Resolution Instruction Count      BD-Rate Loss %\n\t\t\t   Reduction %   avg.psnr ovr.psnr   ssim   \n\t  0    Average        0.758      0.0358   0.0348   0.0527  \n\t  0   rtc_derf       -0.000      0.0000   0.0000   0.0000  \n\t  0        rtc        1.480      0.0614   0.0597   0.0903  \n\t  \nThe speed-quality trade-off for speed\u003d0 over \u0027rtc\u0027 set is ~0.0414. \nAlong with the change suggested by you, we shall add speed\u003d0 data as well to commit message (given above observations). Another option is to enable the sf for speed \u003e\u003d 1. \nPlease let us know your thoughts on our observations/approach.\nRegards,\nRanjit",
      "parentUuid": "3b3a3f16_8f4e4a02",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1212,
        "endChar": 19
      },
      "revId": "7c7842f52e4dc205b6fa574d5a409e7c0a0fc9e5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3eccdfcb_a5fede34",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 2
      },
      "lineNbr": 1212,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-08-31T17:48:06Z",
      "side": 1,
      "message": "Hi Ranjit, thanks for pointing out that speed 0 is different from speed 1 to 4! I didn\u0027t notice that. Will take a look. For now, since nobody uses speed \u003c 5, the purpose that we look at speed \u003c 5 features is to make speed 5 better. The tradeoff for speed 0 is fine, and feel free to make the change.",
      "parentUuid": "3399aeb1_da93f843",
      "range": {
        "startLine": 1210,
        "startChar": 4,
        "endLine": 1212,
        "endChar": 19
      },
      "revId": "7c7842f52e4dc205b6fa574d5a409e7c0a0fc9e5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}