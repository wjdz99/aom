{
  "comments": [
    {
      "key": {
        "uuid": "8073c649_5e078847",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 816,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-07-17T22:43:58Z",
      "side": 0,
      "message": "(size_t)(data_end - data) \u003c payload_size is checked here.",
      "range": {
        "startLine": 816,
        "startChar": 4,
        "endLine": 816,
        "endChar": 51
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cc599453_3830ccf1",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 834,
      "author": {
        "id": 5290
      },
      "writtenOn": "2018-07-17T18:07:41Z",
      "side": 0,
      "message": "\"data_end\" is used below as well.\nI\u0027m wondering if \u0027data_end\u0027 itself should be modified at line#820 above. Something like:\nelse if (data + payload_size \u003c data_end) {\n  data_end \u003d data + payload_size;\n}",
      "range": {
        "startLine": 834,
        "startChar": 45,
        "endLine": 834,
        "endChar": 53
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c8c82b5_c2ec7d37",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 834,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-07-17T19:23:26Z",
      "side": 0,
      "message": "We can\u0027t change data_end like that (it would break line 791), because the data buffer may contain multiple OBUs. We need to know both the end of the current OBU (data + payload_size) and the end of the data buffer (data_end).",
      "parentUuid": "cc599453_3830ccf1",
      "range": {
        "startLine": 834,
        "startChar": 45,
        "endLine": 834,
        "endChar": 53
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "601f56de_043f760c",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 834,
      "author": {
        "id": 5290
      },
      "writtenOn": "2018-07-17T19:32:49Z",
      "side": 0,
      "message": "Ack",
      "parentUuid": "9c8c82b5_c2ec7d37",
      "range": {
        "startLine": 834,
        "startChar": 45,
        "endLine": 834,
        "endChar": 53
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "488e8fab_4372e7fb",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 896,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-07-17T19:23:26Z",
      "side": 0,
      "message": "I think we should change this line to:\n\n       if (payload_size \u003c obu_payload_offset) {\n\nThis ensures the \"data + obu_payload_offset\" and \"data + payload_size\" arguments we pass to read_one_tile_group_obu() at lines 901-902 make sense.\n\nWhat do you think?",
      "range": {
        "startLine": 896,
        "startChar": 8,
        "endLine": 896,
        "endChar": 61
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fcfda5a9_88859cc0",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 896,
      "author": {
        "id": 5290
      },
      "writtenOn": "2018-07-17T19:32:49Z",
      "side": 0,
      "message": "Haven\u0027t looked at this too closely, but I think we need to check both maybe?\n(Unless we know somehow that data_end - data \u003e\u003d payload_size for sure, in which case, we should at least add an assert).",
      "parentUuid": "488e8fab_4372e7fb",
      "range": {
        "startLine": 896,
        "startChar": 8,
        "endLine": 896,
        "endChar": 61
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6836c7f8_a67692b3",
        "filename": "av1/decoder/obu.c",
        "patchSetId": 1
      },
      "lineNbr": 896,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-07-17T22:43:58Z",
      "side": 0,
      "message": "Yes, we know that data_end - data \u003e\u003d payload_size. (I annotated the check above.)\n\nI don\u0027t usually add an assertion when the code that guarantees the condition is within the same function. (In this case, it is at line 816). Since this is a long function, I am fine either way. Please let me know what you prefer.",
      "parentUuid": "fcfda5a9_88859cc0",
      "range": {
        "startLine": 896,
        "startChar": 8,
        "endLine": 896,
        "endChar": 61
      },
      "revId": "050fb027d347d0ae1b008877e3715329406e7e1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    }
  ]
}