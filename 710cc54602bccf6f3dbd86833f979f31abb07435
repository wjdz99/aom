{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8b61e89f_a76fb9bc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-22T11:19:20Z",
      "side": 1,
      "message": "Hi Yunqing, \n\nThis CL refactors the source_sad_nonrd by introducing a new level kVeryLowSad in SOURCE_SAD enum.\n\nIt also fixes the bug reported in the nightly build: BUG\u003daomedia:3311. \n\nPlease review the CL.\n\nThanks,\nNeeraj\n\n",
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0a30754_03d1c423",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-22T17:25:25Z",
      "side": 1,
      "message": "Thanks for the quick fix. Looks good overall.",
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f37247d1_67bbf102",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-22T17:32:02Z",
      "side": 1,
      "message": "Merged the CL to fix the Jenkins test. Feel free to address the comments/suggestions later.",
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c45f288_3319192d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-23T09:32:20Z",
      "side": 1,
      "message": "Thanks for reviewing the CL. Please see our response below.",
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15c6de74_98063e52",
        "filename": "av1/encoder/av1_temporal_denoiser.c",
        "patchSetId": 2
      },
      "lineNbr": 675,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-22T17:25:25Z",
      "side": 1,
      "message": "Can this be \"content_state.source_sad_nonrd \u003c\u003d kLowSad\"?",
      "range": {
        "startLine": 674,
        "startChar": 8,
        "endLine": 675,
        "endChar": 49
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8872b651_1bbc649f",
        "filename": "av1/encoder/av1_temporal_denoiser.c",
        "patchSetId": 2
      },
      "lineNbr": 675,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-23T09:32:20Z",
      "side": 1,
      "message": "Yes, the usage \"content_state.source_sad_nonrd \u003c\u003d kLowSad\" at this place is bit-exact with \"-DCONFIG_AV1_TEMPORAL_DENOISING\u003d1\" config.",
      "parentUuid": "15c6de74_98063e52",
      "range": {
        "startLine": 674,
        "startChar": 8,
        "endLine": 675,
        "endChar": 49
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b83db210_0cbde8af",
        "filename": "av1/encoder/av1_temporal_denoiser.c",
        "patchSetId": 2
      },
      "lineNbr": 675,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-23T10:13:47Z",
      "side": 1,
      "message": "However, the function \"av1_scale_part_thresh()\" is disabled under #if 0 macro. Currently not enabled for CONFIG_AV1_TEMPORAL_DENOISING . When it is enabled, there may be bit-exact violation.",
      "parentUuid": "8872b651_1bbc649f",
      "range": {
        "startLine": 674,
        "startChar": 8,
        "endLine": 675,
        "endChar": 49
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9605fdcc_8ad74a3f",
        "filename": "av1/encoder/av1_temporal_denoiser.c",
        "patchSetId": 2
      },
      "lineNbr": 675,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-23T16:36:05Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b83db210_0cbde8af",
      "range": {
        "startLine": 674,
        "startChar": 8,
        "endLine": 675,
        "endChar": 49
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cf5fb216_47f868d4",
        "filename": "av1/encoder/av1_temporal_denoiser.c",
        "patchSetId": 2
      },
      "lineNbr": 675,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-08-23T17:18:58Z",
      "side": 1,
      "message": "The function av1_scale_part_thresh() should only have effect when we enable denoiser (noise_sensitivity \u003e 0), but since we haven\u0027t enabled/tested denoiser much, we left it alone. We should enable it under CONFIG_AV1_TEMPORAL_DENOISING at some point.",
      "parentUuid": "9605fdcc_8ad74a3f",
      "range": {
        "startLine": 674,
        "startChar": 8,
        "endLine": 675,
        "endChar": 49
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "848e4a47_0f3cc4ba",
        "filename": "av1/encoder/nonrd_pickmode.c",
        "patchSetId": 2
      },
      "lineNbr": 2239,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-22T17:25:25Z",
      "side": 1,
      "message": "same here",
      "range": {
        "startLine": 2238,
        "startChar": 14,
        "endLine": 2239,
        "endChar": 61
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "553f50d9_e1e17b3b",
        "filename": "av1/encoder/nonrd_pickmode.c",
        "patchSetId": 2
      },
      "lineNbr": 2239,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-23T09:32:20Z",
      "side": 1,
      "message": "No. Setting \"content_state.source_sad_nonrd \u003c\u003d kLowSad\" does not give bit-exact outcome. The average speed-quality impact is negligible, but max-drop is up to 0.81 (for cpu 10).",
      "parentUuid": "848e4a47_0f3cc4ba",
      "range": {
        "startLine": 2238,
        "startChar": 14,
        "endLine": 2239,
        "endChar": 61
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4bec3f9d_009411d2",
        "filename": "av1/encoder/nonrd_pickmode.c",
        "patchSetId": 2
      },
      "lineNbr": 2239,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-23T16:36:05Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "553f50d9_e1e17b3b",
      "range": {
        "startLine": 2238,
        "startChar": 14,
        "endLine": 2239,
        "endChar": 61
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c2bf2e2_9309094d",
        "filename": "av1/encoder/var_based_part.c",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-22T17:25:25Z",
      "side": 1,
      "message": "same here",
      "range": {
        "startLine": 461,
        "startChar": 7,
        "endLine": 461,
        "endChar": 69
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd790375_eac05231",
        "filename": "av1/encoder/var_based_part.c",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 29295
      },
      "writtenOn": "2022-08-23T09:32:20Z",
      "side": 1,
      "message": "No. Setting \"content_state.source_sad_nonrd \u003c\u003d kLowSad\" does not give bit-exact outcome. The average speed-quality impact is negligible, but max-drop is up to 0.38 (cpu 7).",
      "parentUuid": "2c2bf2e2_9309094d",
      "range": {
        "startLine": 461,
        "startChar": 7,
        "endLine": 461,
        "endChar": 69
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05d525cb_2d46c39b",
        "filename": "av1/encoder/var_based_part.c",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-23T16:36:05Z",
      "side": 1,
      "message": "Thanks for the study. No sure what causes the loss. \"source_sad_nonrd \u003d\u003d 0\" causes the difference?",
      "parentUuid": "bd790375_eac05231",
      "range": {
        "startLine": 461,
        "startChar": 7,
        "endLine": 461,
        "endChar": 69
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "111c3222_585e70fe",
        "filename": "av1/encoder/var_based_part.c",
        "patchSetId": 2
      },
      "lineNbr": 461,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-08-23T17:18:58Z",
      "side": 1,
      "message": "I think we should still make the change: low_blksad \u003c\u003d kLowSad, and same in above places, even if there is some small loss (maybe expected since now additional superblocks will get larger partition thresholds, more early exits, etc).\n\nThe change makes more sense and it was the intended behavior. For video mode I didn\u0027t expect much if any superblocks to get source_sad_nonrd \u003d kZeroSad, because of noise, for most clips.\n\nFor screen there should be more bdrate-speed change, but if its neutral is ok (expecting small speedup with small loss)",
      "parentUuid": "05d525cb_2d46c39b",
      "range": {
        "startLine": 461,
        "startChar": 7,
        "endLine": 461,
        "endChar": 69
      },
      "revId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "patchSetCommitId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "710cc54602bccf6f3dbd86833f979f31abb07435",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}